{"version":3,"file":"index.umd.js","sources":["../src/models/common.ts","../src/resources/error.ts","../src/request.ts","../src/resources/point.ts","../src/resources/stations.ts","../src/index.ts"],"sourcesContent":["export interface Inventory {\n  model?: {\n    start: string\n    end: string\n  }\n  hourly?: {\n    start: string\n    end: string\n  }\n  daily?: {\n    start: string\n    end: string\n  }\n  monthly?: { start: number; end: number }\n  normals?: { start: number; end: number }\n}\n\nexport interface Identifier {\n  national: string\n  wmo: string\n  icao: string\n}\nexport interface Location {\n  latitude: number\n  longitude: number\n  elevation: number\n}\nexport interface Meta {\n  source?: string\n  start?: number\n  end?: number\n  exec_time: number\n  generated: string\n}\n\nexport interface Name {\n  [key: string]: string\n}\n\nexport interface MeteostatResponse {\n  meta: Meta\n  data: any\n}\n\nexport type Units = 'metric' | 'imperial' | 'scientific'\n\nexport enum WeatherConditionCode {\n  Clear = 1,\n  Fair = 2,\n  Cloudy = 3,\n  Overcast = 4,\n  Fog = 5,\n  FreezingFog = 6,\n  LightRain = 7,\n  Rain = 8,\n  HeavyRain = 9,\n  FreezingRain = 10,\n  HeavyFreezingRain = 11,\n  Sleet = 12,\n  HeavySleet = 13,\n  LightSnowfall = 14,\n  Snowfall = 15,\n  HeavySnowfall = 16,\n  RainShower = 17,\n  HeavyRainShower = 18,\n  SleetShower = 19,\n  HeavySleetShower = 20,\n  SnowShower = 21,\n  HeavySnowShower = 22,\n  Lightning = 23,\n  Hail = 24,\n  Thunderstorm = 25,\n  HeavyThunderstorm = 26,\n  Storm = 27,\n}\n","export class MeteostatError {\n  message: string\n  status: number\n  statusText: string\n\n  constructor(error: Response) {\n    this.status = error.status\n    this.statusText = error.statusText\n  }\n}\n\nexport class BadRequestError extends MeteostatError {\n  constructor(error: Response) {\n    super(error)\n    this.message = 'Please check the query parameters'\n  }\n}\n\nexport class UnauthorizedError extends MeteostatError {\n  constructor(error: Response) {\n    super(error)\n    this.message = 'Make sure to send a valid RapidAPI key'\n  }\n}\n\nexport class ForbiddenError extends MeteostatError {\n  constructor(error: Response) {\n    super(error)\n    this.message = \"You're not allowed to access this endpoint\"\n  }\n}\n\nexport class NotFoundError extends MeteostatError {\n  constructor(error: Response) {\n    super(error)\n    this.message = \"This endpoint doesn't exist\"\n  }\n}\n\nexport class TooManyRequestsError extends MeteostatError {\n  constructor(error: Response) {\n    super(error)\n    this.message = \"You've exceeded the quota\"\n  }\n}\n\nexport class ServiceTemporarilyUnavailableError extends MeteostatError {\n  constructor(error: Response) {\n    super(error)\n    this.message = 'The API is currently down'\n  }\n}\n","import 'isomorphic-fetch'\n\nimport { MeteostatResponse } from './models'\nimport {\n  BadRequestError,\n  ForbiddenError,\n  NotFoundError,\n  ServiceTemporarilyUnavailableError,\n  TooManyRequestsError,\n  UnauthorizedError,\n} from './resources/error'\n\nexport type RequestParams = {\n  uri: string\n  params: Record<string, unknown>\n}\n\nexport class Request {\n  request: (params: RequestParams) => Promise<Response>\n\n  constructor(apiKey: string) {\n    this.request = ({ uri, params }: RequestParams): Promise<Response> => {\n      const query: string = new URLSearchParams(\n        Object.entries(params).reduce(\n          (acc, [key, value]) => ({ ...acc, [key]: String(value) }),\n          {},\n        ),\n      ).toString()\n      return fetch(`https://meteostat.p.rapidapi.com/${uri}?${query}`, {\n        headers: {\n          'x-rapidapi-host': 'meteostat.p.rapidapi.com',\n          'x-rapidapi-key': apiKey,\n        },\n      })\n    }\n  }\n\n  public async makeApiRequest(\n    uri: RequestParams['uri'],\n    params: RequestParams['params'],\n  ): Promise<MeteostatResponse> {\n    try {\n      const response = await this.request({\n        uri,\n        params,\n      })\n      if (!response.ok) {\n        throw response\n      }\n      return response.json() as Promise<MeteostatResponse>\n    } catch (error) {\n      switch (error?.status) {\n        case 400:\n          throw new BadRequestError(error)\n        case 401:\n          throw new UnauthorizedError(error)\n        case 403:\n          throw new ForbiddenError(error)\n        case 404:\n          throw new NotFoundError(error)\n        case 429:\n          throw new TooManyRequestsError(error)\n        case 503:\n          throw new ServiceTemporarilyUnavailableError(error)\n        default:\n          throw error\n      }\n    }\n  }\n}\n","import {\n  PointDailyRequest,\n  PointDailyResponse,\n  PointHourlyRequest,\n  PointHourlyResponse,\n  PointMonthlyRequest,\n  PointMonthlyResponse,\n  PointNormalsRequest,\n  PointNormalsResponse,\n} from '../models/point'\nimport { Request } from '../request'\n\nexport class Point {\n  private readonly request: Request\n\n  constructor(request: Request) {\n    this.request = request\n  }\n\n  async daily(params: PointDailyRequest): Promise<PointDailyResponse> {\n    return await this.request.makeApiRequest('point/daily', params)\n  }\n\n  async hourly(params: PointHourlyRequest): Promise<PointHourlyResponse> {\n    return await this.request.makeApiRequest('point/hourly', params)\n  }\n\n  async monthly(params: PointMonthlyRequest): Promise<PointMonthlyResponse> {\n    return await this.request.makeApiRequest('point/monthly', params)\n  }\n\n  async normals(params: PointNormalsRequest): Promise<PointNormalsResponse> {\n    return await this.request.makeApiRequest('point/normals', params)\n  }\n}\n","import {\n  StationsDailyRequest,\n  StationsDailyResponse,\n  StationsHourlyRequest,\n  StationsHourlyResponse,\n  StationsMetaRequest,\n  StationsMetaResponse,\n  StationsMonthlyRequest,\n  StationsMonthlyResponse,\n  StationsNearbyRequest,\n  StationsNearbyResponse,\n  StationsNormalsRequest,\n  StationsNormalsResponse,\n} from '../models/stations'\nimport { Request } from '../request'\n\nexport class Stations {\n  private readonly request: Request\n\n  constructor(request: Request) {\n    this.request = request\n  }\n\n  async daily(params: StationsDailyRequest): Promise<StationsDailyResponse> {\n    return await this.request.makeApiRequest('stations/daily', params)\n  }\n\n  async hourly(params: StationsHourlyRequest): Promise<StationsHourlyResponse> {\n    return await this.request.makeApiRequest('stations/hourly', params)\n  }\n\n  async meta(params: StationsMetaRequest): Promise<StationsMetaResponse> {\n    return await this.request.makeApiRequest('stations/meta', params)\n  }\n\n  async monthly(\n    params: StationsMonthlyRequest,\n  ): Promise<StationsMonthlyResponse> {\n    return await this.request.makeApiRequest('stations/monthly', params)\n  }\n\n  async nearby(params: StationsNearbyRequest): Promise<StationsNearbyResponse> {\n    return await this.request.makeApiRequest('stations/nearby', params)\n  }\n  async normals(\n    params: StationsNormalsRequest,\n  ): Promise<StationsNormalsResponse> {\n    return await this.request.makeApiRequest('stations/normals', params)\n  }\n}\n","import { Request } from './request'\nimport { Point } from './resources/point'\nimport { Stations } from './resources/stations'\n\nexport * from './models'\n\nexport class Meteostat {\n  private readonly request: Request\n  point: Point\n  stations: Stations\n\n  constructor(apiKey: string) {\n    this.request = new Request(apiKey)\n    this.point = new Point(this.request)\n    this.stations = new Stations(this.request)\n  }\n}\n"],"names":["WeatherConditionCode","MeteostatError","error","message","status","statusText","this","BadRequestError","_this","UnauthorizedError","_this2","ForbiddenError","_this3","NotFoundError","_this4","TooManyRequestsError","_this5","ServiceTemporarilyUnavailableError","_this6","Request","apiKey","request","uri","query","URLSearchParams","Object","entries","params","reduce","acc","String","toString","fetch","headers","makeApiRequest","response","ok","json","Point","daily","hourly","monthly","normals","Stations","meta","nearby","point","stations"],"mappings":"2pBA8CYA,EC9CCC,EAKX,SAAYC,QAJZC,oBACAC,mBACAC,kBAGEC,KAAKF,OAASF,EAAME,OACpBE,KAAKD,WAAaH,EAAMG,YAIfE,2BACX,WAAYL,gBACVM,cAAMN,UACDC,QAAU,sCAHnB,iBAAqCF,GAOxBQ,2BACX,WAAYP,gBACVQ,cAAMR,UACDC,QAAU,2CAHnB,iBAAuCF,GAO1BU,2BACX,WAAYT,gBACVU,cAAMV,UACDC,QAAU,+CAHnB,iBAAoCF,GAOvBY,2BACX,WAAYX,gBACVY,cAAMZ,UACDC,QAAU,gCAHnB,iBAAmCF,GAOtBc,2BACX,WAAYb,gBACVc,cAAMd,UACDC,QAAU,8BAHnB,iBAA0CF,GAO7BgB,2BACX,WAAYf,gBACVgB,cAAMhB,UACDC,QAAU,8BAHnB,iBAAwDF,GC7B3CkB,0BAGX,WAAYC,QAFZC,eAGEf,KAAKe,QAAU,gBAAGC,IAAAA,IACVC,EAAgB,IAAIC,gBACxBC,OAAOC,UAFYC,QAEIC,OACrB,SAACC,uBAA4BA,gBAAYC,kBACzC,KAEFC,WACF,OAAOC,0CAA0CV,MAAOC,EAAS,CAC/DU,QAAS,CACP,kBAAmB,2BACnB,iBAAkBb,yBAMbc,wBACXZ,EACAK,aAGyBrB,oEAAAI,EAAKW,QAAQ,CAClCC,IAAAA,EACAK,OAAAA,mBAFIQ,GAIN,IAAKA,EAASC,GACZ,MAAMD,EAER,OAAOA,EAASE,8EACTnC,GACP,aAAQA,SAAAA,EAAOE,QACb,SACE,UAAUG,EAAgBL,GAC5B,SACE,UAAUO,EAAkBP,GAC9B,SACE,UAAUS,EAAeT,GAC3B,SACE,UAAUW,EAAcX,GAC1B,SACE,UAAUa,EAAqBb,GACjC,SACE,UAAUe,EAAmCf,GAC/C,QACE,MAAMA,MAhDhB,yCCLaoC,0BAGX,WAAYjB,QAFKA,eAGff,KAAKe,QAAUA,EAJnB,2BAOQkB,eAAMZ,8BACGrB,KAAKe,QAAQa,eAAe,cAAeP,IAR5D,sCAWQa,gBAAOb,8BACErB,KAAKe,QAAQa,eAAe,eAAgBP,IAZ7D,sCAeQc,iBAAQd,8BACCrB,KAAKe,QAAQa,eAAe,gBAAiBP,IAhB9D,sCAmBQe,iBAAQf,8BACCrB,KAAKe,QAAQa,eAAe,gBAAiBP,IApB9D,yCCIagB,0BAGX,WAAYtB,QAFKA,eAGff,KAAKe,QAAUA,EAJnB,2BAOQkB,eAAMZ,8BACGrB,KAAKe,QAAQa,eAAe,iBAAkBP,IAR/D,sCAWQa,gBAAOb,8BACErB,KAAKe,QAAQa,eAAe,kBAAmBP,IAZhE,sCAeQiB,cAAKjB,8BACIrB,KAAKe,QAAQa,eAAe,gBAAiBP,IAhB9D,sCAmBQc,iBACJd,8BAEarB,KAAKe,QAAQa,eAAe,mBAAoBP,IAtBjE,sCAyBQkB,gBAAOlB,8BACErB,KAAKe,QAAQa,eAAe,kBAAmBP,IA1BhE,sCA4BQe,iBACJf,8BAEarB,KAAKe,QAAQa,eAAe,mBAAoBP,IA/BjE,wEJ8BY3B,EAAAA,yBAAAA,+CAEVA,mBACAA,uBACAA,2BACAA,iBACAA,iCACAA,6BACAA,mBACAA,6BACAA,oCACAA,8CACAA,sBACAA,gCACAA,sCACAA,4BACAA,sCACAA,gCACAA,0CACAA,kCACAA,4CACAA,gCACAA,0CACAA,8BACAA,oBACAA,oCACAA,8CACAA,kCK9DA,SAAYoB,QAJKC,oBACjByB,kBACAC,gBAGEzC,KAAKe,QAAU,IAAIF,EAAQC,GAC3Bd,KAAKwC,MAAQ,IAAIR,EAAMhC,KAAKe,SAC5Bf,KAAKyC,SAAW,IAAIJ,EAASrC,KAAKe"}